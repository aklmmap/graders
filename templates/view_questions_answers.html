<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questions and Answers</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Header styles -->
    <style>
        header {
            background-color: black; /* Blue color */
            color: white;
            padding: 10px;
            text-align: left;
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .app-name {
            margin: 0;
            font-family: Arial, sans-serif; /* Adjust font-family as needed */
        }
        footer {
            background-color: black; /* Blue color */
            color: white;
            padding: 10px;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
<!-- Header -->
<header>
    <div class="container header-content">
        <h1 class="app-name">My Grader</h1>
        {% if request.user.is_authenticated %}
            <p>Welcome, {{ request.user.username }}</p>
        {% endif %}
    </div>
</header>

<!-- Main content -->
<div class="container mt-5">
    <h1>Test Result of : {{ exam.exam_name }}</h1>

    <!-- Total score -->
    {% if total_score %}
        <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">Total Score</h4>
            <p class="mb-0">Total Score for this exam is: {{ total_score|floatformat:"2" }}</p>
        </div>
    {% endif %}

    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Question</th>
            <th>Answer</th>
            <th>Score</th>
        </tr>
        </thead>
        <tbody>
        {% for scoresheet in scoresheets %}
            <tr>
                <td>{{ scoresheet.question.question_text }}</td>
                <td>{{ scoresheet.answer }}</td>
                <td>{{ scoresheet.score }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3">No questions and answers found for this student in this exam.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- Back to Dashboard button -->
    <button type="button" class="btn btn-primary mt-3"
            onclick="window.location.href='{% if request.user.is_authenticated %}{% if request.user.person.is_teacher %}{% url 'teacher_dashboard' %}{% else %}{% url 'student_dashboard' %}{% endif %}{% else %}{% url 'login' %}{% endif %}'">Back to Dashboard
    </button>
</div>

<!-- Footer -->
<br>
<footer>
    University of Windsor, MAC &#174;
</footer>

<!-- Bootstrap JS (optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- JavaScript to adjust footer position -->
<script>
    function adjustFooterPosition() {
        const body = document.body;
        const footer = document.querySelector('footer');
        if (body.clientHeight <= window.innerHeight) {
            footer.style.position = 'fixed';
            footer.style.bottom = 0;
        } else {
            footer.style.position = 'relative';
        }
    }

    window.addEventListener('DOMContentLoaded', adjustFooterPosition);
    window.addEventListener('resize', adjustFooterPosition);
</script>
</body>
</html>
